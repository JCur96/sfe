<<<<<<< Updated upstream
# (margin = margin(t = 0, r = 20, b = 20, l = 0)))
p1 <- ggplot(NHM_Pangolins, aes(x=as.numeric(Decade), y=Percent_overlap)) +
geom_point()+
xlab('Decade of Collection') +
ylab('Percentage Overlap') +
=======
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T) +
# labs(tag = 'b') +
>>>>>>> Stashed changes
theme_bw()
print(p1)
suppressMessages(ggsave('../output/figure4b.pdf', p1, 'pdf'))
fig4 <- cowplot::plot_grid(p, p1, labels= 'AUTO')
# fig4 <- gridExtra::grid.arrange(p, p1, ncol=2)
suppressMessages(ggsave('../output/figure4.pdf', fig4, 'pdf') )
plotMaps(NHM_Pangolins_hulls, IUCN, path = '../output/convex_hull_graphs/')
# fig4 <- gridExtra::grid.arrange(p, p1, ncol=2)
print(fig4)
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins_hulls %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p1 = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T) +
# labs(tag = 'b') +
theme_bw(plot.margin = unit(c(0, 0, 0, 0), "cm"))
print(p1)
suppressMessages(ggsave('../output/figure4b.pdf', p1, 'pdf'))
fig4 <- cowplot::plot_grid(p, p1, labels= 'AUTO')
# fig4 <- gridExtra::grid.arrange(p, p1, ncol=2)
print(fig4)
suppressMessages(ggsave('../output/figure4.pdf', fig4, 'pdf') )
plotMaps(NHM_Pangolins_hulls, IUCN, path = '../output/convex_hull_graphs/')
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins_hulls %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p1 = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T) +
# labs(tag = 'b') +
theme(plot.margin = unit(c(0, 0, 0, 0), "cm")) +
theme_bw()
print(p1)
suppressMessages(ggsave('../output/figure4b.pdf', p1, 'pdf'))
fig4 <- cowplot::plot_grid(p, p1, labels= 'AUTO')
# fig4 <- gridExtra::grid.arrange(p, p1, ncol=2)
print(fig4)
suppressMessages(ggsave('../output/figure4.pdf', fig4, 'pdf') )
plotMaps(NHM_Pangolins_hulls, IUCN, path = '../output/convex_hull_graphs/')
# This function plots maps, but does not display them, it plots and saves them
# in a pre-made destination folder which you are prompted to enter the path to
# when you run this funciton. This both saves computer time and memory, whilst
# allowing you as the user to browse all the maps at your leisure.
plotMaps(NHM_Pangolins, IUCN, path = '../output/point_radius_graphs/')
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T)  +
# labs(tag = 'a') +
theme(plot.margin = unit(c(0, 0, 0, 0), "cm")) +
theme_bw()
print(p)
suppressMessages(ggsave('../output/figure4a.pdf', p, 'pdf'))
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins_hulls %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p1 = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T) +
# labs(tag = 'b') +
theme(plot.margin = unit(c(0, 0, 0, 0), "cm")) +
theme_bw()
print(p1)
suppressMessages(ggsave('../output/figure4b.pdf', p1, 'pdf'))
fig4 <- cowplot::plot_grid(p, p1, labels= 'AUTO')
# fig4 <- gridExtra::grid.arrange(p, p1, ncol=2)
print(fig4)
suppressMessages(ggsave('../output/figure4.pdf', fig4, 'pdf') )
plotMaps(NHM_Pangolins_hulls, IUCN, path = '../output/convex_hull_graphs/')
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins_hulls %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p1 = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T) +
# labs(tag = 'b') +
theme(plot.margin = unit(c(0, 0, 0, 0), "cm")) +
theme_bw()
print(p1)
suppressMessages(ggsave('../output/figure4b.pdf', p1, 'pdf'))
fig4 <- cowplot::plot_grid(p, p1, labels= 'AUTO', ncol=2)
# fig4 <- gridExtra::grid.arrange(p, p1, ncol=2)
print(fig4)
suppressMessages(ggsave('../output/figure4.pdf', fig4, 'pdf') )
plotMaps(NHM_Pangolins_hulls, IUCN, path = '../output/convex_hull_graphs/')
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins_hulls %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p1 = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T) +
# labs(tag = 'b') +
theme(plot.margin = unit(c(0, 0, 0, 0), "cm")) +
theme_bw()
print(p1)
suppressMessages(ggsave('../output/figure4b.pdf', p1, 'pdf'))
fig4 <- cowplot::plot_grid(p, p1, labels= 'AUTO', ncol=2, nrow=1)
# fig4 <- gridExtra::grid.arrange(p, p1, ncol=2)
print(fig4)
suppressMessages(ggsave('../output/figure4.pdf', fig4, 'pdf') )
plotMaps(NHM_Pangolins_hulls, IUCN, path = '../output/convex_hull_graphs/')
?plot_grid
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins_hulls %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p1 = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T) +
# labs(tag = 'b') +
theme(plot.margin = unit(c(0, 0, 0, 0), "cm")) +
theme_bw()
print(p1)
suppressMessages(ggsave('../output/figure4b.pdf', p1, 'pdf'))
fig4 <- cowplot::plot_grid(p, p1, labels= 'AUTO', rel_heights = 1)
# fig4 <- gridExtra::grid.arrange(p, p1, ncol=2)
print(fig4)
suppressMessages(ggsave('../output/figure4.pdf', fig4, 'pdf') )
plotMaps(NHM_Pangolins_hulls, IUCN, path = '../output/convex_hull_graphs/')
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins_hulls %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p1 = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T) +
# labs(tag = 'b') +
theme(plot.margin = unit(c(0, 0, 0, 0), "cm")) +
theme_bw()
print(p1)
suppressMessages(ggsave('../output/figure4b.pdf', p1, 'pdf'))
fig4 <- cowplot::plot_grid(p, p1, labels= 'AUTO', rel_heights = 0)
# fig4 <- gridExtra::grid.arrange(p, p1, ncol=2)
print(fig4)
suppressMessages(ggsave('../output/figure4.pdf', fig4, 'pdf') )
plotMaps(NHM_Pangolins_hulls, IUCN, path = '../output/convex_hull_graphs/')
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins_hulls %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p1 = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T) +
# labs(tag = 'b') +
theme(plot.margin = unit(c(0, 0, 0, 0), "cm")) +
theme_bw()
print(p1)
suppressMessages(ggsave('../output/figure4b.pdf', p1, 'pdf'))
fig4 <- cowplot::plot_grid(p, p1, labels= 'AUTO', rel_heights = -1)
# fig4 <- gridExtra::grid.arrange(p, p1, ncol=2)
print(fig4)
suppressMessages(ggsave('../output/figure4.pdf', fig4, 'pdf') )
plotMaps(NHM_Pangolins_hulls, IUCN, path = '../output/convex_hull_graphs/')
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins_hulls %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p1 = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T) +
# labs(tag = 'b') +
theme(plot.margin = unit(c(0, 0, 0, 0), "cm")) +
theme_bw()
print(p1)
suppressMessages(ggsave('../output/figure4b.pdf', p1, 'pdf'))
fig4 <- cowplot::plot_grid(p, p1, labels= 'AUTO', rel_heights = 0.5)
# fig4 <- gridExtra::grid.arrange(p, p1, ncol=2)
print(fig4)
suppressMessages(ggsave('../output/figure4.pdf', fig4, 'pdf') )
plotMaps(NHM_Pangolins_hulls, IUCN, path = '../output/convex_hull_graphs/')
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins_hulls %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p1 = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T) +
# labs(tag = 'b') +
theme(plot.margin=grid::unit(c(0,0,0,0), "mm")) +
theme_bw()
print(p1)
suppressMessages(ggsave('../output/figure4b.pdf', p1, 'pdf'))
fig4 <- cowplot::plot_grid(p, p1, labels= 'AUTO', rel_heights = 0.5)
# fig4 <- gridExtra::grid.arrange(p, p1, ncol=2)
print(fig4)
suppressMessages(ggsave('../output/figure4.pdf', fig4, 'pdf') )
plotMaps(NHM_Pangolins_hulls, IUCN, path = '../output/convex_hull_graphs/')
# This function plots maps, but does not display them, it plots and saves them
# in a pre-made destination folder which you are prompted to enter the path to
# when you run this funciton. This both saves computer time and memory, whilst
# allowing you as the user to browse all the maps at your leisure.
plotMaps(NHM_Pangolins, IUCN, path = '../output/point_radius_graphs/')
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T)  +
# labs(tag = 'a') +
theme(plot.margin=grid::unit(c(0,0,0,0), "mm")) +
theme_bw()
print(p)
suppressMessages(ggsave('../output/figure4a.pdf', p, 'pdf'))
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins_hulls %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p1 = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T) +
# labs(tag = 'b') +
theme(plot.margin=grid::unit(c(0,0,0,0), "mm")) +
theme_bw()
print(p1)
suppressMessages(ggsave('../output/figure4b.pdf', p1, 'pdf'))
fig4 <- cowplot::plot_grid(p, p1, labels= 'AUTO', rel_heights = 0.5)
# fig4 <- gridExtra::grid.arrange(p, p1, ncol=2)
print(fig4)
suppressMessages(ggsave('../output/figure4.pdf', fig4, 'pdf') )
plotMaps(NHM_Pangolins_hulls, IUCN, path = '../output/convex_hull_graphs/')
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins_hulls %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p1 = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T) +
# labs(tag = 'b') +
# theme(plot.margin=grid::unit(c(0,0,0,0), "mm")) +
theme_bw(plot.margin=grid::unit(c(0,0,0,0), "mm"))
print(p1)
suppressMessages(ggsave('../output/figure4b.pdf', p1, 'pdf'))
fig4 <- cowplot::plot_grid(p, p1, labels= 'AUTO', rel_heights = 0.5)
# fig4 <- gridExtra::grid.arrange(p, p1, ncol=2)
print(fig4)
suppressMessages(ggsave('../output/figure4.pdf', fig4, 'pdf') )
plotMaps(NHM_Pangolins_hulls, IUCN, path = '../output/convex_hull_graphs/')
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins_hulls %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p1 = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T) +
# labs(tag = 'b') +
# theme(plot.margin=grid::unit(c(0,0,0,0), "mm")) +
theme_bw()
print(p1)
suppressMessages(ggsave('../output/figure4b.pdf', p1, 'pdf'))
# fig4 <- cowplot::plot_grid(p, p1, labels= 'AUTO', rel_heights = 0.5)
fig4 <- gridExtra::grid.arrange(p, p1, ncol=2)
print(fig4)
suppressMessages(ggsave('../output/figure4.pdf', fig4, 'pdf') )
plotMaps(NHM_Pangolins_hulls, IUCN, path = '../output/convex_hull_graphs/')
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins_hulls %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p1 = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T) +
# labs(tag = 'b') +
# theme(plot.margin=grid::unit(c(0,0,0,0), "mm")) +
theme_bw()
print(p1)
suppressMessages(ggsave('../output/figure4b.pdf', p1, 'pdf'))
# fig4 <- cowplot::plot_grid(p, p1, labels= 'AUTO', rel_heights = 0.5)
fig4 <- gridExtra::grid.arrange(p, p1, ncol=2)
# print(fig4)
suppressMessages(ggsave('../output/figure4.pdf', fig4, 'pdf') )
plotMaps(NHM_Pangolins_hulls, IUCN, path = '../output/convex_hull_graphs/')
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins_hulls %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p1 = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T) +
# labs(tag = 'b') +
# theme(plot.margin=grid::unit(c(0,0,0,0), "mm")) +
theme_bw()
print(p1)
suppressMessages(ggsave('../output/figure4b.pdf', p1, 'pdf'))
# fig4 <- cowplot::plot_grid(p, p1, labels= 'AUTO', rel_heights = 0.5)
fig4 <- gridExtra::grid.arrange(p, p1, ncol=2)
# print(fig4)
suppressMessages(ggsave('../output/figure4.pdf', fig4, 'pdf', height = 5) )
plotMaps(NHM_Pangolins_hulls, IUCN, path = '../output/convex_hull_graphs/')
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins_hulls %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p1 = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T) +
# labs(tag = 'b') +
# theme(plot.margin=grid::unit(c(0,0,0,0), "mm")) +
theme_bw()
print(p1)
suppressMessages(ggsave('../output/figure4b.pdf', p1, 'pdf'))
# fig4 <- cowplot::plot_grid(p, p1, labels= 'AUTO', rel_heights = 0.5)
fig4 <- gridExtra::grid.arrange(p, p1, ncol=2)
# print(fig4)
suppressMessages(ggsave('../output/figure4.pdf', fig4, 'pdf', height = 3) )
plotMaps(NHM_Pangolins_hulls, IUCN, path = '../output/convex_hull_graphs/')
# This function plots maps, but does not display them, it plots and saves them
# in a pre-made destination folder which you are prompted to enter the path to
# when you run this funciton. This both saves computer time and memory, whilst
# allowing you as the user to browse all the maps at your leisure.
plotMaps(NHM_Pangolins, IUCN, path = '../output/point_radius_graphs/')
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T)  +
labs(tag = 'a') +
theme(plot.margin=grid::unit(c(0,0,0,0), "mm")) +
theme_bw()
print(p)
suppressMessages(ggsave('../output/figure4a.pdf', p, 'pdf'))
# Here is an example of a single plot from that command, or how to plot just one
# graph that is of interest
egForPlot <-NHM_Pangolins_hulls %>% filter(binomial == 'Smutsia_temminckii')
IUCNForPlot <- IUCN %>% filter(binomial == 'Smutsia_temminckii')
# puts the coords into the order expected down in ggmap coords
bbox <- c(-14.414063,-37.996163,53.613281,27.994401)
xlim <- c(bbox[1], bbox[3])
ylim <- c(bbox[2], bbox[4])
landMap <- rnaturalearth::ne_countries(returnclass = 'sf') %>%
st_union()
p1 = ggplot(data = landMap) +
geom_sf() +
geom_sf(mapping = aes(alpha = 0.5, fill='blue'), data = egForPlot , show.legend = F) +
geom_sf(mapping = aes(alpha = 0.1, fill = "red"), data = IUCNForPlot, show.legend = F) +
coord_sf(xlim = xlim, ylim = ylim, expand = T) +
labs(tag = 'b') +
# theme(plot.margin=grid::unit(c(0,0,0,0), "mm")) +
theme_bw()
<<<<<<< Updated upstream
# p4 <- ggplot(NHM_Pangolins, aes(x=Continent, y=Percent_overlap)) +
#   geom_boxplot()
# p4
# p5 <- ggplot(NHM_Pangolins, aes(group = binomial, x=Continent, y=numberOfOverlaps)) +
#   geom_point()
# p5
dataPlots <- gridExtra::grid.arrange(p, p1, p2, p3, ncol=2)
ggsave(filename = '../output/dataPlots.png', plot = dataPlots, device = 'png')
# Then I model to see if the trends I think I'm seeing are actually there
# This model doesn't converge, but thats fine.
model <- glm(cbind(numberOfOverlaps, (numberOfSpecimens - numberOfOverlaps)) ~
binomial, data=NHM_Pangolins, family = 'binomial')
# This one does converge, but is not significant
model1 <- glm(cbind(numberOfOverlaps, (numberOfSpecimens - numberOfOverlaps)) ~
Decade, data = NHM_Pangolins, family = 'binomial')
# Check for overdispersion (should be < 2)
sum_model1 <- summary(model1)
sum_model1$deviance / sum_model1$df.resid
# plot(model1)
anova(model1, test = "Chisq")
summary(model1)
# This model is significant, with continent significantly predicting the number
# of overlaps, with asia having more(?)
model2 <- glm(cbind(numberOfOverlaps, (numberOfSpecimens - numberOfOverlaps)) ~
Continent, data = NHM_Pangolins, family = 'binomial')
# plot(model2)
sum_model2 <- summary(model2)
sum_model2$deviance / sum_model2$df.resid
anova(model2, test = "Chisq")
summary(model2)
# for hulls, just make a table with that information in
# it, or a world map showing overlaps or the like. Also add the exploratory graphs
# perhaps as those are interesting.
NHM_Pangolins_hulls <- st_drop_geometry(NHM_Pangolins_hulls)
summary(model1)
# This model is significant, with continent significantly predicting the number
# of overlaps, with asia having more(?)
model2 <- glm(cbind(numberOfOverlaps, (numberOfSpecimens - numberOfOverlaps)) ~
Continent, data = NHM_Pangolins, family = 'binomial')
summary(model2)
cite
citation()
?st_convex_hull
NHM_Pangolins_hulls <- st_drop_geometry(NHM_Pangolins_hulls)
citation()
citation(RStudio)
version
RStudio.Version()
cite(roxygen2)
cite('roxygen2')
reference('roxygen2')
citation('roxygen2')
knitr::opts_chunk$set(
error = TRUE,
collapse = TRUE,
comment = "#>"
)
=======
print(p1)
suppressMessages(ggsave('../output/figure4b.pdf', p1, 'pdf'))
# fig4 <- cowplot::plot_grid(p, p1, labels= 'AUTO', rel_heights = 0.5)
fig4 <- gridExtra::grid.arrange(p, p1, ncol=2)
# print(fig4)
suppressMessages(ggsave('../output/figure4.pdf', fig4, 'pdf', height = 3) )
plotMaps(NHM_Pangolins_hulls, IUCN, path = '../output/convex_hull_graphs/')
>>>>>>> Stashed changes
